!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0),n(1);var r=class{constructor(t,e,n,r,s,o){this.name=t,this.img=e,this.year=n,this.rating=r,this.link=s,this.parent=o,this.card=document.createElement("div"),this.card.classList.add("card")}create(){const t=document.createElement("a");t.classList.add("nameMovie");const e=document.createElement("img");e.classList.add("imgMovie");const n=document.createElement("div");n.classList.add("yearMovie");const r=document.createElement("div");r.classList.add("ratingMovie"),t.textContent=this.name,t.href=this.link,t.target="_blank",e.src=this.img,"N/A"===this.img&&(e.src="./src/public/noImage.jpg"),n.textContent=this.year,r.textContent=this.rating,this.card.append(t),this.card.append(e),this.card.append(n),this.card.append(r),this.parent.append(this.card)}};function s(t){return fetch(`https://www.omdbapi.com/?i=${t}&apikey=e858f9dd`).then(t=>t.json()).then(t=>t.imdbRating)}function o(t){const e=[],n=[],r=[],o=Object.keys(t.Search);for(let a=0;a<o.length;a+=1){const o=[];o.push(t.Search[a].Title),o.push(t.Search[a].Poster),o.push(t.Search[a].Year),e.push(o),r.push(s(t.Search[a].imdbID)),n.push(t.Search[a].imdbID)}return async function(){const t=await Promise.all(r);return function(){for(let r=0;r<t.length;r+=1)e[r].push(t[r]),e[r].push(`https://www.imdb.com/title/${n[r]}/`)}(),e}().then(t=>t)}var a=class{constructor(t){this.request=t.trim(),this.page=2}getFirstPage(){return async function(t){try{const e=`https://www.omdbapi.com/?s=${t}&apikey=e858f9dd`,n=await fetch(e),r=await n.json();return await o(r)}catch(t){throw Error()}}(this.request).then(t=>t).catch(()=>!1)}getNextPage(){return async function(t,e){const n=`https://www.omdbapi.com/?s=${t}&page=${e}&apikey=e858f9dd`,r=await fetch(n),s=await r.json();return await o(s)}(this.request,this.page).then(t=>(this.page+=1,t)).catch(()=>!1)}};const c=document.querySelector(".cardContain"),i=document.querySelector(".prev"),d=document.querySelector(".next"),l=document.querySelector(".searchButton"),u=document.querySelector(".searchInput"),h=document.querySelector(".info"),m=document.querySelector(".clear"),f=document.querySelector(".load"),p=document.querySelector(".content");function v(t,e){"correct"===e&&(h.textContent="Showing results for "+t,h.classList.add("infoShow"),setTimeout(()=>{h.classList.remove("infoShow")},5e3)),"incorrect"===e&&(h.textContent="No results for "+t,h.classList.add("infoShow"),setTimeout(()=>{h.classList.remove("infoShow")},5e3))}f.addEventListener("mousedown",t=>t.preventDefault());const g=new class{constructor(t="harry potter"){this.movies=new a(t),this.page="next",this.position=4,this.dozenCards=0}createCardFilms(t="first"){const e=t,n=this;!async function(){if("first"===e){f.classList.add("loadOn"),p.classList.add("contentOff");const t=await n.movies.getFirstPage();for(let e=0;e<t.length;e+=1){new r(...t[e],c).create()}f.classList.remove("loadOn"),p.classList.remove("contentOff")}if("next"===e){f.classList.add("loadOn");const t=await n.movies.getNextPage();for(let e=0;e<t.length;e+=1){new r(...t[e],c).create()}f.classList.remove("loadOn")}}()}slider(){const t=this;i.addEventListener("click",()=>{if(4!==t.position){const{transform:e}=c.style,n=e.match(/-\d+|\d+/g);c.style.transform=`translateX(${Number(n[0])+255}px)`,t.position-=1}}),d.addEventListener("click",()=>{t.position%10==5&&t.position>t.dozenCards&&(t.createCardFilms("next"),t.dozenCards+=10);const e=document.querySelectorAll(".card");if(t.position<e.length){const{transform:e}=c.style,n=e.match(/-\d+|\d+/g);c.style.transform=`translateX(${Number(n[0])-255}px)`,t.position+=1}})}search(){const t=this;function e(){var e;u.value&&(e=u.value,/[а-я]/i.test(e)?async function(t){const e=`https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20200504T172115Z.378fce2446b14212.ea24c6129e4a3b4e139fc560626a10030b354dfb&text= ${t} &lang=ru-en`,n=await fetch(e),r=await n.json();return String(r.text).toLowerCase()}(u.value).then(e=>{t.movies=new a(e),t.movies.getFirstPage().then(n=>{n?(t.clear(),t.createCardFilms(),v(e,"correct")):v(e,"incorrect")})}):(t.movies=new a(u.value.toLowerCase()),t.movies.getFirstPage().then(e=>{e?(t.clear(),t.createCardFilms()):v(u.value.toLowerCase(),"incorrect")})))}u.focus(),l.addEventListener("click",e),document.addEventListener("keydown",t=>{"Enter"===t.code&&e()}),m.addEventListener("click",()=>{u.value="",u.focus()})}clear(){document.querySelectorAll(".card").forEach(t=>t.remove()),this.position=4,this.dozenCards=0,c.style.transform="translateX(0px)"}};g.createCardFilms(),g.slider(),g.search()}]);